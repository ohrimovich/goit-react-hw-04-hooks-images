(this["webpackJsonpgoit-react-hw-03-imagefider"]=this["webpackJsonpgoit-react-hw-03-imagefider"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),i=a.n(r),c=(a(16),a(3)),s=a(4),l=a(6),u=a(5),h=(a(17),a(8)),m=(a(18),a(19),a(1)),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={imageName:""},e.handlerNameChange=function(t){e.setState({imageName:t.currentTarget.value.toLowerCase()})},e.handlerSubmit=function(t){t.preventDefault(),""!==e.state.imageName.trim()?(e.props.onChange(e.state.imageName),e.setState({imageName:""})):h.b.error("Enter name of image, what would you like to find")},e}return Object(s.a)(a,[{key:"render",value:function(){return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{onSubmit:this.handlerSubmit,className:"SearchForm",children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",value:this.state.imageName,autoFocus:!0,placeholder:"Search images and photos",onChange:this.handlerNameChange})]})})}}]),a}(n.Component),d=g,p=a(10),j=(a(21),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(m.jsx)("ul",{className:"ImageGallery",children:this.props.children})}}]),a}(n.Component)),b=j;a(22);var f=function(e){var t=e.onLoadMore;return Object(m.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})};var O={fetchImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23101905-f5de468dd217ea275d2e77ee2&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}},v=O,y=(a(23),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onClick=function(t){var a=t.target.dataset.url,n=t.target.dataset.alt;e.props.onClick(a,n)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return this.props.list.map((function(t){return Object(m.jsx)("li",{onClick:e.onClick,className:"ImageGalleryItem",children:Object(m.jsx)("img",{src:t.webformatURL,alt:t.tags,"data-alt":t.tags,"data-url":t.largeImageURL,className:"ImageGalleryItem-image"})},t.id)}))}}]),a}(n.Component)),k=y,w=(a(24),document.querySelector("#modal-root")),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClick()},e.onClick=function(t){t.currentTarget===t.target&&e.props.onClick()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:this.onClick,children:Object(m.jsx)("div",{className:"Modal",children:Object(m.jsx)("img",{src:this.props.largeImageURL,alt:this.props.alt})})}),w)}}]),a}(n.Component),C=(a(25),a(11)),S=a.n(C),N=(a(46),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={images:[],isVisible:!1,loading:!1,page:1,showModal:!1,largeImage:"",alt:""},e.toggleModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.setState((function(e){return{showModal:!e.showModal,largeImage:t,alt:a}}))},e.onLoadMore=function(){e.setState({loading:!0}),v.fetchImage(e.props.name,e.state.page).then((function(t){return e.setState((function(e){var a=e.images,n=e.page;return{images:[].concat(Object(p.a)(a),Object(p.a)(t.hits)),page:n+1}}))})).finally((function(){return e.setState({loading:!1})}))},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;e.name!==this.props.name&&(this.setState({loading:!0}),v.fetchImage(this.props.name).then((function(e){return 0===e.hits.length?t.clearList():t.setState((function(t){return{images:e.hits,isVisible:!0,page:t.page+1}}))})).catch((function(e){return console.log(e)})).finally((function(){return t.setState({loading:!1})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"clearList",value:function(){this.setState({images:[],isVisible:!1}),h.b.error("Nothing not found")}},{key:"render",value:function(){var e=this.state,t=e.largeImage,a=e.alt,n=e.images,o=e.isVisible,r=e.showModal,i=e.loading;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b,{children:Object(m.jsx)(k,{list:n,onClick:this.toggleModal})}),o&&Object(m.jsx)(f,{onLoadMore:this.onLoadMore}),r&&Object(m.jsx)(x,{largeImageURL:t,alt:a,onClick:this.toggleModal}),i&&Object(m.jsx)("div",{className:"Spinner",children:Object(m.jsx)(S.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50,timeout:2e4})})]})}}]),a}(n.Component)),I=N,M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={imageName:""},e.formSubmit=function(t){e.setState({imageName:t})},e}return Object(s.a)(a,[{key:"render",value:function(){console.log(this.state.imageName);var e=this.state.imageName;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d,{onChange:this.formSubmit}),Object(m.jsx)(h.a,{autoClose:3e3}),Object(m.jsx)(I,{name:e,onClick:this.toggleModal})]})}}]),a}(n.Component),L=M;i.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.fabb23b7.chunk.js.map